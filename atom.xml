<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ZengGUI</title>
  
  <subtitle>ZengGUI 的博客</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://devtor.cn/"/>
  <updated>2017-12-10T05:29:22.085Z</updated>
  <id>http://devtor.cn/</id>
  
  <author>
    <name>ZengGUI</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MyBatis逆向工程</title>
    <link href="http://devtor.cn/technology/MyBatis-generator.html"/>
    <id>http://devtor.cn/technology/MyBatis-generator.html</id>
    <published>2017-12-09T12:21:08.000Z</published>
    <updated>2017-12-10T05:29:22.085Z</updated>
    
    <content type="html"><![CDATA[<p>逆向工程字面意思就是反向生成工程, 和 Hibernate一样, MyBatis也有自己的逆向工程工具。详细信息请看<a href="http://www.mybatis.org/generator/index.html" target="_blank" rel="noopener">官方文档</a></p><p>使用MyBatis逆向工程, 我们就不用再手动创建Model实体类以及对应的Mapper.xml文件和dao类；它可以直接连接数据库的表自动帮我们完成这些操作。是不是很方便？其实也只需要简单的几步就可以了。</p><p>首先我们从MyBatis的逆向工程<a href="https://github.com/mybatis/generator/releases" target="_blank" rel="noopener">Github仓库</a>下载最新的jar包,还有MyBatis和MySQL的jar包。</p><h3 id="逆向工程的配置"><a href="#逆向工程的配置" class="headerlink" title="逆向工程的配置"></a>逆向工程的配置</h3><h4 id="1-新建项目，导入Jar包"><a href="#1-新建项目，导入Jar包" class="headerlink" title="1. 新建项目，导入Jar包"></a>1. 新建项目，导入Jar包</h4><p>使用IDEA新建一个Java项目，导入我们刚刚下载的三个jar包。</p><p>1、逆向工程核心包 2、MyBatis3.x jar包    3、MySQL连接jar包。</p><h4 id="2-新建逆向工程的配置文件"><a href="#2-新建逆向工程的配置文件" class="headerlink" title="2.新建逆向工程的配置文件"></a>2.新建逆向工程的配置文件</h4><p>在src包下创建逆向工程的配置文件generatorConfig.xml,直接拷贝官方介绍中的<a href="http://www.mybatis.org/generator/configreference/xmlconfig.html" target="_blank" rel="noopener">XML配置</a>即可.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"testTables"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 是否去除自动生成的注释 true：是  false:否 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--数据库连接信息：驱动类、连接地址、用户名、密码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">"jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">"root"</span> <span class="attr">password</span>=<span class="string">"root"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 默认为false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer，</span></span><br><span class="line"><span class="comment">   为true时，把JDBC DECIMAL 和 NUMERIC 类型解析为</span></span><br><span class="line"><span class="comment">java.math.BigDecimal --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 生成Model类的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"cn.devtor.model"</span> <span class="attr">targetProject</span>=<span class="string">".\src"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 从数据库返回的值被清理前后的空格 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 生成mapper映射文件的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"cn.devtor.mapper"</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">targetProject</span>=<span class="string">".\src"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 生成Dao接口的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span>  </span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">"cn.devtor.dao"</span> </span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">".\src"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定数据库的表 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"book"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 有些表的字段需要指定java类型</span></span><br><span class="line"><span class="comment">         &lt;table schema="" tableName=""&gt;</span></span><br><span class="line"><span class="comment">            &lt;columnOverride column="" javaType="" /&gt;</span></span><br><span class="line"><span class="comment">        &lt;/table&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>XML内容都加了注释，我们只要修改几个地方就可以了</p><ul><li>数据库连接信息 </li><li>生成Model、Mapper、Dao 类的位置</li><li>数据库的表 table</li></ul><h4 id="3-执行代码"><a href="#3-执行代码" class="headerlink" title="3.执行代码"></a>3.执行代码</h4><p>在src包下新建一个Main.java 文件, 内容也是从官方那里Copy过来的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">generator</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">//指定逆向工程de配置文件</span></span><br><span class="line">        File configFile = <span class="keyword">new</span> File(<span class="string">"src/generatorConfig.xml"</span>);</span><br><span class="line">        ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">        Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">        DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">        MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config,</span><br><span class="line">                callback, warnings);</span><br><span class="line">        myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"><span class="comment">// write your code here</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Main generatorSqlmap = <span class="keyword">new</span> Main();</span><br><span class="line">            generatorSqlmap.generator();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行程序，等控制台打印出 <code>Process finished with exit code 0</code> 刷新一下文件目录就能看到自动生成的文件了。</p><h3 id="快速使用"><a href="#快速使用" class="headerlink" title="快速使用"></a>快速使用</h3><ol><li>git clone <a href="https://github.com/ZengGUI/MyBatis-generator.git" target="_blank" rel="noopener">https://github.com/ZengGUI/MyBatis-generator.git</a></li><li>用你的IDEA打开即可。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;逆向工程字面意思就是反向生成工程, 和 Hibernate一样, MyBatis也有自己的逆向工程工具。详细信息请看&lt;a href=&quot;http://www.mybatis.org/generator/index.html&quot; target=&quot;_blank&quot; rel=&quot;noop
      
    
    </summary>
    
      <category term="technology" scheme="http://devtor.cn/categories/technology/"/>
    
    
      <category term="Java" scheme="http://devtor.cn/tags/Java/"/>
    
      <category term="MyBatis" scheme="http://devtor.cn/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>Docker部署(二):MySQL数据库</title>
    <link href="http://devtor.cn/operation/docker-mysql.html"/>
    <id>http://devtor.cn/operation/docker-mysql.html</id>
    <published>2017-08-06T07:31:19.000Z</published>
    <updated>2017-12-11T11:14:05.705Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Docker-容器构建"><a href="#Docker-容器构建" class="headerlink" title="Docker 容器构建"></a>Docker 容器构建</h3><ul><li>使用Dockerfile构建镜像</li><li>使用官方提供的Docker镜像</li></ul><h4 id="所谓Dockerfile"><a href="#所谓Dockerfile" class="headerlink" title="所谓Dockerfile"></a>所谓Dockerfile</h4><p>Dockerfile是一种被Docker程序解释的脚本，Dockerfile由一条一条的指令组成，每条指令对应Linux下面的一条命令。Docker程序将这些Dockerfile指令翻译真正的Linux命令。Dockerfile有自己书写格式和支持的命令，Docker程序解决这些命令间的依赖关系，类似于Makefile。Docker程序将读取Dockerfile，根据指令生成定制的image。相比image这种黑盒子，Dockerfile这种显而易见的脚本更容易被使用者接受，它明确的表明image是怎么产生的。有了Dockerfile，当我们需要定制自己额外的需求时，只需在Dockerfile上添加或者修改指令，重新生成image即可，省去了敲命令的麻烦。</p><blockquote><p>不过这里只介绍Dockerfile构建容器的步骤，接下来的文章都是以第二种方式, <strong>使用官方提供的Docker镜像来部署</strong>。</p></blockquote><h3 id="下载MySQL官方提供的Docker镜像"><a href="#下载MySQL官方提供的Docker镜像" class="headerlink" title="下载MySQL官方提供的Docker镜像"></a>下载MySQL官方提供的Docker镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull mysql:tag</span></span><br></pre></td></tr></table></figure><p><em>:tag</em> 是你想从官方拉取的版本(例如5.5, 5.6, 5.7 或者latest )。如果省略 <em>tag</em> 则拉取当前最新的版本, 即latest。</p><p>可以使用以下的命令列出下载Docker镜像:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker images</span></span><br><span class="line"></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mysql               5.7                 dd0afb9bc4a9        3 days ago          408MB</span><br><span class="line">mysql               latest              dd0afb9bc4a9        3 days ago          408MB</span><br></pre></td></tr></table></figure><h3 id="启动MySQL服务器"><a href="#启动MySQL服务器" class="headerlink" title="启动MySQL服务器"></a>启动MySQL服务器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name=mysql -e MYSQL_ROOT_PASSWORD=root -v /app/mysql:/var/lib/mysql -d mysql</span></span><br></pre></td></tr></table></figure><p><code>--name=mysql</code> 这个属性是为启动的MySQL容器设置一个别名</p><p><code>-d</code> 以守护进程方式运行 (后台运行)</p><p><code>-e MYSQL_ROOT_PASSWORD</code>在启动MySQL的时候设置密码,这里密码以root演示</p><p><code>-v /app/mysql/:/var/lib/mysql</code> 通过Volume把容器内的文件映射到物理机</p><h3 id="查看MySQL的日志"><a href="#查看MySQL的日志" class="headerlink" title="查看MySQL的日志"></a>查看MySQL的日志</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker logs mysql</span></span><br></pre></td></tr></table></figure><h3 id="连接MySQL服务器"><a href="#连接MySQL服务器" class="headerlink" title="连接MySQL服务器"></a>连接MySQL服务器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it mysql mysql -u root -p</span></span><br></pre></td></tr></table></figure><p>提示输入密码的时候，输入刚刚创建的时候指定的密码就ok了。现在你就能随意使用的MySQL服务器咯。</p><p>修改 MySQL密码：<code>$ ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;新密码&#39;;</code> </p><h3 id="容器管理"><a href="#容器管理" class="headerlink" title="容器管理"></a>容器管理</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker restart mysql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker stop mysql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker start mysql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rm mysql</span></span><br></pre></td></tr></table></figure><p>注意，当你想要使用<code>docker rm mysql</code> 之前，请记得先停止容器(docker stop mysql)的运行。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Docker-容器构建&quot;&gt;&lt;a href=&quot;#Docker-容器构建&quot; class=&quot;headerlink&quot; title=&quot;Docker 容器构建&quot;&gt;&lt;/a&gt;Docker 容器构建&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;使用Dockerfile构建镜像&lt;/li&gt;
&lt;li&gt;使用
      
    
    </summary>
    
      <category term="operation" scheme="http://devtor.cn/categories/operation/"/>
    
    
      <category term="Docker" scheme="http://devtor.cn/tags/Docker/"/>
    
      <category term="Linux" scheme="http://devtor.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Docker部署(一):服务器架构</title>
    <link href="http://devtor.cn/operation/docker-framework.html"/>
    <id>http://devtor.cn/operation/docker-framework.html</id>
    <published>2017-08-06T05:58:11.000Z</published>
    <updated>2017-12-11T11:13:51.837Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Docker 容器技术作为近年来最受欢迎的开源技术，只要简单的几行语句就能部署运行一个容器。Docker轻巧，且易移植，号称“build once, configure once and run anywhere”，这是其能迅速流行起来的原因之一。</p><p>Docker是现在开发应用程序的不错选择；因为对于一个研发组来说，部署一个应用再也不用像以前那样繁琐的修改、设置配置文件了；因为对于Docker来说它“屏蔽”了应用程序的运行环境，不管你使用Mac、Linux还是Windows都能用相同的方式运行。</p><h3 id="Docker-部署"><a href="#Docker-部署" class="headerlink" title="Docker 部署"></a>Docker 部署</h3><p>我们可以很容易的启动一个Docker容器，但是我们要怎么在生产环境下使用Docker容器呢？</p><p>Docker的安装可以参考我之前的文章, <a href="/operation/ubuntu-install-docker.html">Ubuntu安装Docker CE并配置加速器</a> 和 <a href="/operation/centos-install-dockerce.html">Centos安装Docker CE并配置加速器</a></p><p>在这里我使用自己的案例，简单记录一下，服务器上的所有应用都使用Docker容器构建部署。</p><ul><li>Nginx 服务器</li><li>Tomcat 服务器</li><li>MySQL 数据库</li><li>Gogs 代码托管</li></ul><p>Nginx作为前端负载同时配置反向代理，接收所有的流量并分发给其他的应用容器。MySQL作为底层容器，负责所有的的数据库连接操作；Tomcat 服务器和Gogs 代码托管通过Docker的<code>--link</code> 属性连接MySQL。</p><p>详细配置信息，请看下一篇博客。</p>]]></content>
    
    <summary type="html">
    
      Docker 容器技术作为近年来最受欢迎的开源技术，只要简单的几行语句就能部署运行一个容器。Docker轻巧，且易移植，号称“build once, configure once and run anywhere”，这是其能迅速流行起来的原因之一。目前我们已经能在生产环境中越来越多的见到Docker容器的应用了。
    
    </summary>
    
      <category term="operation" scheme="http://devtor.cn/categories/operation/"/>
    
    
      <category term="Docker" scheme="http://devtor.cn/tags/Docker/"/>
    
      <category term="Linux" scheme="http://devtor.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>正方教务系统-批量自动评价教学质量评价功能</title>
    <link href="http://devtor.cn/technology/ZF-Evaluation.html"/>
    <id>http://devtor.cn/technology/ZF-Evaluation.html</id>
    <published>2017-06-08T07:30:30.000Z</published>
    <updated>2017-12-09T07:08:10.082Z</updated>
    
    <content type="html"><![CDATA[<p><a href="javascript:(function(){var script=document.createElement('script');script.type='text/javascript';script.src='https://rawgit.com/ZengGUI/ZF-Evaluation/master/script.js';document.getElementsByTagName('head')[0].appendChild(script);})()" target="_blank" rel="noopener"><button type="button" onclick="alert('你需要把我拖拽到书签栏里面喔！')"><del>教学一键评价</del></button></a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript: (function() &#123;var script = document.createElement('script');script.type = 'text/javascript';script.src = 'https://rawgit.com/ZengGUI/ZF-Evaluation/master/script.js';document.getElementsByTagName('head')[0].appendChild(script);&#125;)()"</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"alert('你需要把我拖拽到书签栏里面喔！')"</span>&gt;</span>教学一键评价<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="使用方法1："><a href="#使用方法1：" class="headerlink" title="使用方法1："></a>使用方法1：</h3><ul><li>PS：浏览器推荐使用 Chrome， Safari， Firefox 等</li><li>创建一个新的HTML文件，把上面的代码复制进去</li><li>打开刚刚创建的html文件，把<strong>教学一键评价</strong>按钮拖到书签栏</li><li>登录教务管理系统，点击进入教学质量评价，选中<strong>第一门</strong>需要评价的课程</li><li>在评价页面点击书签栏的你刚才拖拽的按钮，就会自动完成所有评价</li><li>等待一会儿会提示你<strong>评价完成</strong> ，然后点一下<strong>提交</strong> 就好啦</li></ul><h3 id="使用方法2："><a href="#使用方法2：" class="headerlink" title="使用方法2："></a>使用方法2：</h3><ul><li>登录教务管理系统，点击进入教学质量评价，选中<strong>第一门</strong>需要评价的课程</li><li>在浏览器中按 <strong>F12</strong>打开，然后切换到控制台(Console) </li><li>复制下面的js代码</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">script.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">script.src = <span class="string">'https://rawgit.com/ZengGUI/ZF-Evaluation/master/script.js'</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(script);</span><br></pre></td></tr></table></figure><ul><li><p>粘贴到控制台，回车运行 ，就会自动完成所有评价，提示<strong>评价完成</strong>，点<strong>提交</strong>就可以了</p><p>​</p></li></ul>]]></content>
    
    <summary type="html">
    
      正方教务管理系统-批量自动评价教学质量评价功能
    
    </summary>
    
      <category term="technology" scheme="http://devtor.cn/categories/technology/"/>
    
    
      <category term="JavaScript" scheme="http://devtor.cn/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Centos安装Docker CE并配置加速器</title>
    <link href="http://devtor.cn/operation/centos-install-dockerce.html"/>
    <id>http://devtor.cn/operation/centos-install-dockerce.html</id>
    <published>2017-03-16T11:43:00.000Z</published>
    <updated>2017-12-09T07:44:27.690Z</updated>
    
    <content type="html"><![CDATA[<p>PS:有关Docker版本就不重新介绍了，可以看我的上一篇博客<a href="/operation/ubuntu-install-docker.html">Ubuntu16.04安装Docker CE 并配置加速器</a></p><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>1、安装<em>Docker</em>，需要64位版本的<em>Centos 7</em></p><p>2、如果之前安装过旧版本的Docker，请先卸载;首次安装请跳过此步骤。</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum remove docker <span class="string">\</span></span><br><span class="line">                  docker-common <span class="string">\</span></span><br><span class="line">                  container-selinux <span class="string">\</span></span><br><span class="line">                  docker-selinux <span class="string">\</span></span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure><p>准备完以上步骤，就可以正式开始在<em>Centos</em>上安装<em>Docker CE</em></p><h3 id="开始安装Docker"><a href="#开始安装Docker" class="headerlink" title="开始安装Docker"></a>开始安装Docker</h3><p>Docker有两种安装方式，分为存储库和包安装;官方指南推荐存储库安Docker，方便安装和升级任务；因此接下来我将以存储库的方式安装Docker。</p><p>1、安装   yum-utils  ,它可以提供  yum-config-manager  来管理repository及扩展包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils</span><br></pre></td></tr></table></figure><p>2、设置稳定的存储库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum-config-manager \</span></span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>3、更新  yum  包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum makecache fast</span></span><br></pre></td></tr></table></figure><p>4、安装最新版本的Docker CE</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install docker-ce</span></span><br></pre></td></tr></table></figure><p>5、启动Docker CE</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br></pre></td></tr></table></figure><p>至此Docker CE就安装完成了，可以通过运行  hello-world 镜像验证是否已经正确安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo docker run hello-world</span></span><br></pre></td></tr></table></figure><h3 id="配置国内镜像加速器"><a href="#配置国内镜像加速器" class="headerlink" title="配置国内镜像加速器"></a>配置国内镜像加速器</h3><p>1、使用我的 DaoCloud 加速器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | \</span></span><br><span class="line">sh -s http://8ad7943c.m.daocloud.io</span><br></pre></td></tr></table></figure><p>2、重启Docker，就能正常下载部署镜像了。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> systemctl restart docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run hello-world</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Centos 7.2 64位, 安装Docker CE实践并配置加速器
    
    </summary>
    
      <category term="operation" scheme="http://devtor.cn/categories/operation/"/>
    
    
      <category term="Docker" scheme="http://devtor.cn/tags/Docker/"/>
    
      <category term="Linux" scheme="http://devtor.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu安装Docker CE并配置加速器</title>
    <link href="http://devtor.cn/operation/ubuntu-install-docker.html"/>
    <id>http://devtor.cn/operation/ubuntu-install-docker.html</id>
    <published>2017-03-13T15:50:00.000Z</published>
    <updated>2017-12-11T12:17:39.080Z</updated>
    
    <content type="html"><![CDATA[<p>PS：Ubuntu16.04 64位, 安装Docker CE 17.03, 并配置 DaoCloud 加速器</p><h3 id="Docker目前分为两个版本："><a href="#Docker目前分为两个版本：" class="headerlink" title="Docker目前分为两个版本："></a>Docker目前分为两个版本：</h3><ul><li>Docker Enterprise Edition (Docker EE) 专为企业开发和IT团队设计，用于在大规模生产中构建，运送和运行关键业务应用程序。Docker EE集成，认证和支持，为企业提供业界最安全的容器平台，使所有应用程序现代化。</li><li>Docker Community Edition (Docker CE) 是开发人员和小团队的理想选择，希望开始使用Docker并尝试基于容器的应用程序。Docker CE可在许多平台上使用，从桌面到云到服务器。</li></ul><p>准备工作：</p><h4 id="1、安装docker前需要确保拥有root权限，并且是以下64位的Ubuntu版本之一："><a href="#1、安装docker前需要确保拥有root权限，并且是以下64位的Ubuntu版本之一：" class="headerlink" title="1、安装docker前需要确保拥有root权限，并且是以下64位的Ubuntu版本之一："></a>1、安装docker前需要确保拥有root权限，并且是以下64位的Ubuntu版本之一：</h4><ul><li>Ubuntu 16.10</li><li>Ubuntu 16.04(LTS)</li><li>Ubuntu 14.04(LTS)</li></ul><h4 id="2、如此你此前安装过docker-engine-需要先卸载它们："><a href="#2、如此你此前安装过docker-engine-需要先卸载它们：" class="headerlink" title="2、如此你此前安装过docker-engine,需要先卸载它们："></a>2、如此你此前安装过docker-engine,需要先卸载它们：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get remove docker docker-engine</span><br></pre></td></tr></table></figure><h4 id="3、安装-Docker-的AUFS存储驱动程序-强烈建议Ubuntu-14-04用户安装"><a href="#3、安装-Docker-的AUFS存储驱动程序-强烈建议Ubuntu-14-04用户安装" class="headerlink" title="3、安装 Docker 的AUFS存储驱动程序,强烈建议Ubuntu 14.04用户安装."></a>3、安装 Docker 的AUFS存储驱动程序,强烈建议Ubuntu 14.04用户安装.</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install \</span><br><span class="line">linux-image-extra-$(uname -r) \</span><br><span class="line">linux-image-extra-virtual</span><br></pre></td></tr></table></figure><h3 id="开始安装Docker-CE"><a href="#开始安装Docker-CE" class="headerlink" title="开始安装Docker CE"></a>开始安装Docker CE</h3><h4 id="1、安装docker包"><a href="#1、安装docker包" class="headerlink" title="1、安装docker包"></a>1、安装docker包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure><h4 id="2、添加Docker的官方GPG密钥："><a href="#2、添加Docker的官方GPG密钥：" class="headerlink" title="2、添加Docker的官方GPG密钥："></a>2、添加Docker的官方GPG密钥：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure><h4 id="3、设置stable稳定的仓库-stable稳定版每季度发布一次，Edge版每月一次"><a href="#3、设置stable稳定的仓库-stable稳定版每季度发布一次，Edge版每月一次" class="headerlink" title="3、设置stable稳定的仓库(stable稳定版每季度发布一次，Edge版每月一次)"></a>3、设置stable稳定的仓库(stable稳定版每季度发布一次，Edge版每月一次)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository \</span><br><span class="line">        <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">        <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">        stable"</span></span><br></pre></td></tr></table></figure><h4 id="4、更新apt包"><a href="#4、更新apt包" class="headerlink" title="4、更新apt包"></a>4、更新apt包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br></pre></td></tr></table></figure><h4 id="5、安装Docker-CE"><a href="#5、安装Docker-CE" class="headerlink" title="5、安装Docker CE"></a>5、安装Docker CE</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install docker-ce</span><br></pre></td></tr></table></figure><h4 id="6、运行Docker"><a href="#6、运行Docker" class="headerlink" title="6、运行Docker"></a>6、运行Docker</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl start docker</span><br></pre></td></tr></table></figure><h4 id="至此Docker-CE就安装完成了，但是国内访问Docker-Hub有时会遇到问题，所以我们可以配置镜像加速器。例如："><a href="#至此Docker-CE就安装完成了，但是国内访问Docker-Hub有时会遇到问题，所以我们可以配置镜像加速器。例如：" class="headerlink" title="至此Docker CE就安装完成了，但是国内访问Docker Hub有时会遇到问题，所以我们可以配置镜像加速器。例如："></a>至此Docker CE就安装完成了，但是国内访问Docker Hub有时会遇到问题，所以我们可以配置镜像加速器。例如：</h4><ul><li>阿里云加速器</li><li>DaoCloud加速器</li><li>灵雀云加速器</li></ul><h4 id="如果想省去注册账号的一系列动作，可以使用我的DaoCloud加速器。"><a href="#如果想省去注册账号的一系列动作，可以使用我的DaoCloud加速器。" class="headerlink" title="如果想省去注册账号的一系列动作，可以使用我的DaoCloud加速器。"></a>如果想省去注册账号的一系列动作，可以使用我的DaoCloud加速器。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | \</span><br><span class="line">sh -s http://8ad7943c.m.daocloud.io</span><br></pre></td></tr></table></figure><h4 id="之后重启docker，就能下载部署镜像了"><a href="#之后重启docker，就能下载部署镜像了" class="headerlink" title="之后重启docker，就能下载部署镜像了"></a>之后重启docker，就能下载部署镜像了</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl restart docker</span><br><span class="line">$ docker run hello-world</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      腾讯云Ubuntu16.04 64位, 安装Docker CE 17.03, 并配置 DaoCloud 加速器
    
    </summary>
    
      <category term="operation" scheme="http://devtor.cn/categories/operation/"/>
    
    
      <category term="Docker" scheme="http://devtor.cn/tags/Docker/"/>
    
      <category term="Linux" scheme="http://devtor.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Java Byte数组与十六进制互转</title>
    <link href="http://devtor.cn/technology/java-byte-hex.html"/>
    <id>http://devtor.cn/technology/java-byte-hex.html</id>
    <published>2017-03-10T15:33:04.000Z</published>
    <updated>2017-12-09T07:15:12.258Z</updated>
    
    <content type="html"><![CDATA[<p>这两天写android遇到了进制的编解码问题，记录一下Byte数组与十六进制互转。</p><blockquote><p>Byte数组转十六进制</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">byte2HexString</span><span class="params">(<span class="keyword">byte</span>[] bytes)</span> </span>&#123;</span><br><span class="line">        String hex= <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (bytes != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Byte b : bytes) &#123;</span><br><span class="line">                hex += String.format(<span class="string">"%02X"</span>, b.intValue() &amp; <span class="number">0xFF</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hex;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>十六进制转Byte数组</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] hexStringToByteArray(String s) &#123;</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[len / <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i += <span class="number">2</span>) &#123;</span><br><span class="line">                data[i / <span class="number">2</span>] = (<span class="keyword">byte</span>) ((Character.digit(s.charAt(i), <span class="number">16</span>) &lt;&lt; <span class="number">4</span>)</span><br><span class="line">                        + Character.digit(s.charAt(i+<span class="number">1</span>), <span class="number">16</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">//Log.d("", "Argument(s) for hexStringToByteArray(String s)"+ "was not a hex string");</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这两天写android遇到了进制的编解码问题，记录一下Byte数组与十六进制互转。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Byte数组转十六进制&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td
      
    
    </summary>
    
      <category term="technology" scheme="http://devtor.cn/categories/technology/"/>
    
    
      <category term="Java" scheme="http://devtor.cn/tags/Java/"/>
    
  </entry>
  
</feed>
